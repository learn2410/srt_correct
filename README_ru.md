# корректировка тайминга субтитров SRT

Утилита может быть полезна людям изучающим иностранный язык путем просмотра фильмов с субтитрами.
 Если у вас есть фильм на нужном вам языке то субтиры можно скачать из интернета, но 
чаще всего эти субтитры будут рассинхронизированы со звуком.  
Решить эту проблему поможет данная утилита. Для распознавания используется opesource библиотека
 [Vosk](https://alphacephei.com/vosk/) поддерживающая более 20 языков и работающая оффлайн

## Запуск

Для запуска утилиты на локальном компьютере у вас уже должен быть установлен Python 3  
а так же утилита [FFmpeg](https://ffmpeg.org/)   
проверить корректность установки FFmpeg можно выполнив в консоли команду:```ffmpeg -version```  


- Скачайте код.
- Установите зависимости командой `pip install -r requirements.txt`.
- Запустите утилиту без параметров командой: ```python3 srtcorrect.py```  
  При этом рядом с srtcorrect.py будет создан файл ```.conf``` со списком языков и моделей для их распознавания а так 
  же будет скачана модель для распознавания (по умолчанию -для английского языка),
- Если вас интересует другой язык - в файле ```.conf``` раскомментируйте соответсвующую строчку
- Запустите корректировку субтитров командой:  
`python3 srtcorrect.py [-s number_audio_stream] path_to_movie`  
  где -s это необязательный параметр с номером аудиодорожки с нужным языком (если их несколько),
   нумерация дорожек начинается с 0. Если параметр на указан то программа попытается найти 
   подходящую дорожку самостоятельно

###Необходимые условия:  
- Для корректной работы программы необходимо чтобы файл с субтирами (в формате SRT) лежал рядом с видео файлом и названия файлов совпадали
- Полный путь к видеофайлу не должен содержать два или более пробела идущих подряд  

Возможные проблемы:  
-иногда на длинных видео вылетает ошибка  
-утилита плохо переваривает видео с длинными промежутками между разговорами  
-проверялась на английском языке (и немного на испанском), осталные по идее тоже должны работать       

